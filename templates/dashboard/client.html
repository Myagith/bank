{% extends 'base.html' %}
{% block title %}Mon Espace Client{% endblock %}
{% block content %}
<h1>Mon espace</h1>
<p>AperÃ§u de vos comptes et opÃ©rations.</p>

<div class="cards">
  <div class="card">
    <div class="metric-label">Solde global</div>
    <div class="metric-value">{{ total_balance|default:"0.00" }} â‚¬</div>
  </div>
  <div class="card">
    <div class="metric-label">Nombre de comptes</div>
    <div class="metric-value">{{ accounts_count|default:"0" }}</div>
  </div>
  <div class="card">
    <div class="metric-label">Transactions ce mois</div>
    <div class="metric-value">{{ monthly_transactions|default:"0" }}</div>
  </div>
  <div class="card">
    <div class="metric-label">DerniÃ¨re opÃ©ration</div>
    <div class="metric-value">{{ last_transaction_date|default:"Aucune" }}</div>
  </div>
  <div class="card">
    <a class="btn" href="/accounts/">ğŸ“Š Mes comptes</a>
  </div>
  <div class="card">
    <a class="btn" href="/transactions/create/">â• Nouvelle opÃ©ration</a>
  </div>
</div>

<div class="grid2">
  <div>
    <h3>ğŸ“ˆ Ã‰volution de mon solde</h3>
    <canvas id="balanceChart"></canvas>
  </div>
  <div>
    <h3>ğŸ’° RÃ©partition par type d'opÃ©ration</h3>
    <canvas id="typeChart"></canvas>
  </div>
  <div>
    <h3>ğŸ“… ActivitÃ© mensuelle</h3>
    <canvas id="monthlyChart"></canvas>
  </div>
  <div>
    <h3>ğŸ• Heures d'activitÃ©</h3>
    <canvas id="hourChart"></canvas>
  </div>
  <div>
    <h3>ğŸ¯ Objectif d'Ã©pargne</h3>
    <div style="position:relative; width:100%; max-width:200px; margin:auto">
      <canvas id="savingsGauge"></canvas>
      <div class="gauge-center" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-weight:800;"></div>
    </div>
  </div>
  <div>
    <h3>ğŸ“‹ DerniÃ¨res transactions</h3>
    <div class="card" id="recentTransactions">
      <div style="text-align: center; padding: 20px;">Chargement...</div>
    </div>
  </div>
</div>

<script>
import('/static/js/dashboard.js').then(m=>m.renderClientCharts && m.renderClientCharts())
</script>
{% endblock %}

